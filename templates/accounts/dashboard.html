{% extends 'base.html' %}
{% load static %}
{% load month_tags %}

{% block title %}Dashboard{% endblock title %}

{% block content %}
    <div class="table-responsive" id="table-container">
        <h1 class="text-center">
            All bills for entrance <strong style="color: #3a77d7">{{ entrance }}</strong> in
            <strong style="color: #3a77d7">{{ month|month_name }} {{ year }}</strong>
        </h1>
        <br>
        <div class="text-center" id="navigation-buttons">
            <!-- Navigation Links -->
            <a href="?month={{ month|add:-1 }}&year={{ year }}" class="btn btn-primary">
                Previous Month
            </a>
            <a href="?month={{ month|add:1 }}&year={{ year }}" class="btn btn-primary">
                Next Month
            </a>
            <button onclick="window.print()" class="btn btn-secondary" id="print-button">
                Print Table
            </button>
        </div>
        <br>
        <table class="table table-striped table-bordered table-hover" id="bills-table">
        {% include 'partials/_alerts.html' %}
            <thead>
            <tr>
                <th>Owner</th>
                <th class="text-center">Apartment</th>
                <th class="text-center">Electricity</th>
                <th class="text-center">Cleaning</th>
                <th class="text-center">Elevator Electricity</th>
                <th class="text-center">Elevator Maintenance</th>
                <th class="text-center">Entrance Maintenance</th>
                <th class="text-center">Total Bill</th>
                <th class="text-center">Change</th>
                <th class="text-center">Month</th>
                <th class="text-center">Paid</th>
            </tr>
            </thead>
            <tbody>
            {% if bills %}
                {% for bill in bills %}
                    <tr>
                        <td>{{ bill.apartment.owner.full_name }}</td>
                        <td class="text-center">{{ bill.apartment.number }}</td>
                        <td class="text-center">{{ bill.electricity }}</td>
                        <td class="text-center">{{ bill.cleaning }}</td>
                        <td class="text-center">{{ bill.elevator_electricity }}</td>
                        <td class="text-center">{{ bill.elevator_maintenance }}</td>
                        <td class="text-center">{{ bill.entrance_maintenance }}</td>
                        <td class="text-center">{{ bill.total_bill }}</td>
                        <td class="text-center">{{ bill.change }}</td>
                        <td class="text-center">{{ bill.for_month }}</td>
                        {% if bill.is_paid %}
                            <td class="text-center" style="color: #1ba87e">Yes</td>
                        {% else %}
                            <td class="text-center" style="color: #CC3434">No</td>
                        {% endif %}
                    </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="10" class="text-center">No bills found</td>
                </tr>
            {% endif %}
            </tbody>
        </table>
    </div>
{% endblock %}
