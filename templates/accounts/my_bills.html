{% extends 'base.html' %}
{% load static %}
{% load month_tags %}

{% block title %}My bills{% endblock title %}

{% block content %}
    <div class="table-responsive m-2" id="table-container">
        <h1 class="text-center">
            All bills for apartment <strong style="color: #3a77d7">{{ apartment }}</strong>
        </h1>
        <br>
        <table class="table table-striped table-bordered table-hover" id="bills-table">
        {% include 'partials/_alerts.html' %}
            <thead>
            <tr>
                <th>Owner</th>
                <th class="text-center">Apartment</th>
                <th class="text-center">Electricity</th>
                <th class="text-center">Cleaning</th>
                <th class="text-center">Elevator Electricity</th>
                <th class="text-center">Elevator Maintenance</th>
                <th class="text-center">Entrance Maintenance</th>
                <th class="text-center">Total Bill</th>
                <th class="text-center">Change</th>
                <th class="text-center">Month</th>
                <th class="text-center">Paid</th>
            </tr>
            </thead>
            <tbody>
            {% if bills %}
                {% for bill in bills %}
                    <tr>
                        <td>{{ bill.apartment.owner.full_name }}</td>
                        <td class="text-center">{{ bill.apartment.number }}</td>
                        <td class="text-center">{{ bill.electricity }}</td>
                        <td class="text-center">{{ bill.cleaning }}</td>
                        <td class="text-center">{{ bill.elevator_electricity }}</td>
                        <td class="text-center">{{ bill.elevator_maintenance }}</td>
                        <td class="text-center">{{ bill.entrance_maintenance }}</td>
                        <td class="text-center">{{ bill.total_bill }}</td>
                        <td class="text-center">{{ bill.change }}</td>
                        <td class="text-center">{{ bill.for_month }}</td>
                        {% if bill.is_paid %}
                            <td class="text-center" style="color: #1ba87e">Yes</td>
                        {% else %}
                            <td class="text-center" style="color: #CC3434">No</td>
                        {% endif %}
                    </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="10" class="text-center">No bills found</td>
                </tr>
            {% endif %}
            </tbody>
        </table>
    </div>
    <div class="ps-4">
        <div class="row">
            {% if bills.has_other_pages %}
                <ul class="pagination">
                    {% if bills.has_previous %}
                        <li class="page-item"><a class="page-link"
                                                  href="?page={{ bills.previous_page_number }}">&laquo;</a></li>
                    {% else %}
                        <li class="page-item disabled"><span class="page-link">&laquo;</span></li>
                    {% endif %}
                    {% for i in bills.paginator.page_range %}
                        {% if bills.number == i %}
                            <li class="page-item active"><span class="page-link">{{ i }} <span
                                    class="sr-only"></span></span></li>
                        {% else %}
                            <li class="page-item"><a class="page-link"
                                                      href="?page={{ i }}">{{ i }}</a></li>
                        {% endif %}
                    {% endfor %}
                    {% if bills.has_next %}
                        <li class="page-item"><a class="page-link"
                                                  href="?page={{ bills.next_page_number }}">&raquo;</a></li>
                    {% else %}
                        <li class="page-item disabled"><span class="page-link">&raquo;</span></li>
                    {% endif %}
            {% endif %}
        </div>
    </div>
{% endblock %}
